<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>ggbrookings Workaround • ggbrookings</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png"><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="ggbrookings Workaround"><meta property="og:image" content="https://brookingsinstitution.github.io/ggbrookings/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">ggbrookings</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/logos.html">Adding Logos</a>
    <a class="dropdown-item" href="articles/palettes.html">Brookings Palettes</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/BrookingsInstitution/ggbrookings/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="logo.png" class="logo" alt=""><h1>ggbrookings Workaround</h1>
      <small class="dont-index">Source: <a href="https://github.com/BrookingsInstitution/ggbrookings/blob/HEAD/ggbrookings_workaround.md" class="external-link"><code>ggbrookings_workaround.md</code></a></small>
    </div>

<div id="ggbrookings-workaround" class="section level1">

<p>James Seddon</p>
<div class="section level2">
<h2 id="are-you-a-brookings-employee-with-a-company-owned-windows-laptop">Are you a Brookings employee with a company-owned Windows laptop?<a class="anchor" aria-label="anchor" href="#are-you-a-brookings-employee-with-a-company-owned-windows-laptop"></a></h2>
<p>If so, the <code>ggbrookings</code> package will not work right out of the box due to Carbon Black. Read on for a workaround solution.</p>
<hr></div>
<div class="section level2">
<h2 id="step-0-is-this-still-an-issue">Step 0: Is this still an issue?<a class="anchor" aria-label="anchor" href="#step-0-is-this-still-an-issue"></a></h2>
<p>Check if the following is still necessary by running <code><a href="reference/import_roboto.html">ggbrookings::import_roboto()</a></code>. If you get a Carbon Black pop-up, or get a cryptic error message, it is indeed still an issue.</p>
<hr></div>
<div class="section level2">
<h2 id="step-1-install-roboto-again">Step 1: Install Roboto again.<a class="anchor" aria-label="anchor" href="#step-1-install-roboto-again"></a></h2>
<p>First, go to <a href="https://fonts.google.com/specimen/Roboto" class="external-link">this link</a> and hit “Download Family” in the top right hand corner. Open the downloaded file, unzip, and then select all of the .ttf files, and then right-click. Hit Install (see below). <strong>Do not</strong> <code>Install for all users</code>.</p>
<p><img src="Step1.png"></p>
<hr></div>
<div class="section level2">
<h2 id="step-2-locate-these-files">Step 2: Locate these files<a class="anchor" aria-label="anchor" href="#step-2-locate-these-files"></a></h2>
<p>Navigate to <code>C:/Users/[YOUR USERNAME]/AppData/Local/Microsoft/Windows/Fonts/</code>. Check that you see all Roboto fonts installed, and then proceed on to the next step.</p>
<hr></div>
<div class="section level2">
<h2 id="step-3-install-and-load-showtext">Step 3: Install and load <code>showtext</code>
<a class="anchor" aria-label="anchor" href="#step-3-install-and-load-showtext"></a></h2>
<p>Run the following commands:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install showtext, a font-handling package</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"showtext"</span><span class="op">)</span></span>
<span><span class="co"># load this package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/yixuan/showtext" class="external-link">showtext</a></span><span class="op">)</span></span></code></pre></div>
<p>Then, run the following command and verify this is the output you see:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/sysfonts/man/font_paths.html" class="external-link">font_paths</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "C:\\Windows\\Fonts"</span></span></code></pre></div>
<p>If you do, proceed on to the next step.</p>
<hr></div>
<div class="section level2">
<h2 id="step-4-adding-the-font">Step 4: Adding the font<a class="anchor" aria-label="anchor" href="#step-4-adding-the-font"></a></h2>
<p>Unfortunately, you will have to copy and paste this solution into the top of your document for execution every time you restart R.</p>
<p>Replacing your username in lieu of [YOUR USERNAME], removing brackets, run the following:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># First, add an additional font path</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/sysfonts/man/font_paths.html" class="external-link">font_paths</a></span><span class="op">(</span><span class="st">"C:/Users/[YOUR USERNAME]/AppData/Local/Microsoft/Windows/Fonts/"</span><span class="op">)</span></span></code></pre></div>
<p>Then, run this command to add Roboto to the list of available fonts:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/sysfonts/man/font_add.html" class="external-link">font_add</a></span><span class="op">(</span><span class="st">"roboto"</span>, regular <span class="op">=</span> <span class="st">"Roboto-Regular.ttf"</span>,</span>
<span>         bold <span class="op">=</span> <span class="st">"Roboto-Bold.ttf"</span>,</span>
<span>         italic <span class="op">=</span> <span class="st">"Roboto-Italic.ttf"</span>,</span>
<span>         bolditalic <span class="op">=</span> <span class="st">"Roboto-BoldItalic.ttf"</span><span class="op">)</span></span></code></pre></div>
<hr></div>
<div class="section level2">
<h2 id="step-5-telling-r-how-to-render">Step 5: Telling R how to render<a class="anchor" aria-label="anchor" href="#step-5-telling-r-how-to-render"></a></h2>
<p>The next step depends on whether this is an R script (.R file) or an RMarkdown script (.Rmd file). Yes, this is annoying. My solution comes from the creator of the package, and can be found <a href="https://github.com/yixuan/showtext/issues/51" class="external-link">here</a>.</p>
<div class="section level4">
<h4 id="if-this-is-an-r-script-add-this-at-the-top-of-the-document">If this is an R script, add this at the top of the document:<a class="anchor" aria-label="anchor" href="#if-this-is-an-r-script-add-this-at-the-top-of-the-document"></a></h4>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># This tells R what engine to render under (sort of). It's important this is inserted before any graphics rendering.</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/showtext/man/showtext_auto.html" class="external-link">showtext_auto</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># This corrects sizing issues that occur when rendering.</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/showtext/man/showtext_opts.html" class="external-link">showtext_opts</a></span><span class="op">(</span>dpi <span class="op">=</span> <span class="fl">300</span><span class="op">)</span></span></code></pre></div>
<p>Note that the <code><a href="https://rdrr.io/pkg/showtext/man/showtext_opts.html" class="external-link">showtext_opts()</a></code> command will make your plots look strange when viewing in the plots window in RStudio. Adjusting this number may make it less weird, but will cause the final output (ggsaves, etc) to look wrong when saving as a file.</p>
<p>Technically, manually adjusting the dpi in <code>ggsave</code> means that you also need to adjust the dpi above; <code>ggsave</code> defaults to 300, hence the value above.</p>
</div>
<div class="section level4">
<h4 id="if-this-is-an-r-markdown-document-do-this-instead">If this is an R Markdown document, do this instead:<a class="anchor" aria-label="anchor" href="#if-this-is-an-r-markdown-document-do-this-instead"></a></h4>
<p>The solution is much simpler.</p>
<p>In the r setup chunk where options are set, add the following option (while making sure to also add the code from Step 4 <em>after</em> loading your libraries):</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/knitr/man/opts_chunk.html" class="external-link">opts_chunk</a></span><span class="op">$</span><span class="fu">set</span><span class="op">(</span>fig.showtext<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<hr></div>
</div>
<div class="section level2">
<h2 id="step-6-one-more-thing">Step 6: One More Thing<a class="anchor" aria-label="anchor" href="#step-6-one-more-thing"></a></h2>
<p>You should be all set up!</p>
<p>You can now use Roboto in <code>ggbrookings</code>, provided that you also set the following option each time you call <code><a href="reference/theme_brookings.html">theme_brookings()</a></code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set base_family = "roboto" in your ggplot command</span></span>
<span><span class="va">your_plot</span> <span class="op">+</span></span>
<span><span class="fu"><a href="reference/theme_brookings.html">theme_brookings</a></span><span class="op">(</span>base_family <span class="op">=</span> <span class="st">"roboto"</span><span class="op">)</span></span></code></pre></div>
<hr><p>While this is annoying, it is a trivially easy workaround after being set up once. Remember that you will need to run Step 4 and 5 each time you reopen R, and include Step 6 in your <code><a href="reference/theme_brookings.html">theme_brookings()</a></code> function call.</p>
<p>For any questions, feel free to email James Seddon at: jseddon at brookings.edu.</p>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Manuel Alcalá Kovalski, Valerie Wirtschafter.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

